---
import { getOs } from "@lib/utils";
import Download from "./Download";

const { os } = await getOs();
---

<header>
  <div class="fixed top-0 w-full py-4 px-2 bg-white">
    <div class="">
      <nav class="flex items-center justify-between flex-wrap">
        <div class="block lg:hidden">
          <button
            class="navbar-burger flex items-center px-3 py-2 border rounded text-white border-white hover:text-white hover:border-white"
          >
            <svg
              class="fill-current h-6 w-6 text-gray-700"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>Menu</title>
              <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
            </svg>
          </button>
        </div>
        <div
          id="main-nav"
          class="w-full flex-grow lg:flex items-center lg:w-auto hidden"
        >
          <ul
            class="lg:flex items-center gap-3 font-medium text-lg lg:flex-grow mt-2 animated jackinthebox xl:mx-8"
          >
            <a
              href="/download"
              class="flex items-center hover:bg-gray-100 px-2 py-1 rounded-lg gap-2"
            >
              <img class="w-8 h-8" src="/favicon.svg" alt="Noted themes" />
              <p>Noted</p>
            </a>
            <Download nav={true} client:load os={os} />
            <li>
              <a
                class="hover:bg-gray-100 px-2 py-1 rounded-lg"
                target="_blank"
                href="/docs">Docs</a
              >
            </li>
            <li>
              <a
                class="hover:bg-gray-100 px-2 py-1 rounded-lg"
                target="_blank"
                href="/">Themes</a
              >
            </li>
            <li>
              <a
                class="hover:bg-gray-100 px-2 py-1 rounded-lg"
                target="_blank"
                href="https://github.com/BryanVanWinnendael/Noted/">Github</a
              >
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const $navbarBurgers = Array.prototype.slice.call(
      document.querySelectorAll(".navbar-burger"),
      0,
    );
    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach(function ($el) {
        $el.addEventListener("click", function () {
          const $target = document.getElementById("main-nav");
          if (!$target) return;
          $target.classList.toggle("hidden");
        });
      });
    }
  });
</script>
