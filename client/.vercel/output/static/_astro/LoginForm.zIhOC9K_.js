import{j as F,a as $,b as I,g as D,d as m,i as u,c as e,e as G,r as L,s as R,t as Y,S as h,f as H,M as b,h as N}from"./web.BDtHqAq6.js";import{g as W,i as O,a as q,G as J,s as K,b as Q}from"./client.eiXqt5f0.js";import{l as U,E as v,a as c}from"./Error.Gc8dpx_X.js";const V=Y('<form class="grid grid-cols-1 gap-3 w-full"><div class="grid grid-cols-1 gap-2"><label for=email class="font-medium text-zinc-300 text-sm">Email</label><input type=text id=email name=email class="rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:ring-opacity-60 focus:bg-zinc-900"><!$><!/></div><div class="grid grid-cols-1 gap-2"><label for=password class="font-medium text-zinc-300 text-sm">Password</label><input type=password id=password name=password class="rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:ring-opacity-60 focus:bg-zinc-900"><!$><!/></div><button class="bg-zinc-100 py-1.5 border border-zinc-100 rounded-md mt-2 text-zinc-900 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#6488ea] disabled:opacity-50 disabled:cursor-not-allowed"type=submit></button><div><hr class="h-0 border-t mt-4 border-zinc-300"><p class="-mt-2.5 text-xs text-center text-zinc-500"><span class="bg-zinc-900 px-4">Or with</span></p></div><div class="grid grid-cols-1"><button class="bg-zinc-100 p-1.5 border border-zinc-100 flex justify-center items-center gap-2 rounded-md mt-2 text-zinc-900 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"type=button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-auto"preserveAspectRatio=xMidYMid viewBox="0 0 256 262"><path fill=#4285F4 d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"></path><path fill=#34A853 d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"></path><path fill=#FBBC05 d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"></path><path fill=#EB4335 d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"></path></svg><span>Sign in with Google</span></button></div><!$><!/>'),w=W(q);w.setPersistence(O);const X=async i=>{const{email:d,password:r}=i;try{const a=await(await Q(w,d,r)).user.getIdToken(),s=await fetch("/api/auth/login.json",{method:"GET",headers:{Authorization:`Bearer ${a}`}});if(!s.ok)return await s.json();s.redirected&&window.location.assign(s.url)}catch{return{error:"Invalid email/password"}}},Z=async()=>{const i=new J,r=await(await K(w,i)).user.getIdToken(),t=await fetch("/api/auth/login.json",{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!t.ok)return await t.json();t.redirected&&window.location.assign(t.url)},ne=()=>{const[i,d]=$(),[r]=I(i,X),[t,a]=$(),s=async n=>{n.preventDefault(),a();const o=new FormData(n.currentTarget),l=U.safeParse(o);if(!l.success){const g=l.error.flatten();a(g);return}d(l.data)};return(()=>{const n=D(V),o=n.firstChild,l=o.firstChild,g=l.nextSibling,S=g.nextSibling,[z,_]=m(S.nextSibling),f=o.nextSibling,y=f.firstChild,E=y.nextSibling,C=E.nextSibling,[k,M]=m(C.nextSibling),p=f.nextSibling,P=p.nextSibling,x=P.nextSibling,A=x.firstChild,T=x.nextSibling,[j,B]=m(T.nextSibling);return n.addEventListener("submit",s),u(o,e(h,{get when(){return t()?.fieldErrors.email},get fallback(){return e(v,{})},get children(){return e(c,{get message(){return t()?.fieldErrors.email}})}}),z,_),u(f,e(h,{get when(){return t()?.fieldErrors.password},get fallback(){return e(v,{})},get children(){return e(c,{get message(){return t()?.fieldErrors.password}})}}),k,M),u(p,e(h,{fallback:"Sign in",get when(){return r.loading},children:"Signing in..."})),A.$$click=Z,u(n,e(N,{get children(){return e(H,{get children(){return[e(b,{get when(){return r.error?.code==="auth/wrong-password"},get children(){return e(c,{message:"Your password is incorrect"})}}),e(b,{get when(){return r.error?.code==="auth/user-not-found"},get children(){return e(c,{message:"You don't have an account with this email"})}}),e(b,{get when(){return r()?.error},get children(){return e(c,{get message(){return r().error}})}})]}})}}),j,B),G(()=>R(p,"disabled",r.loading)),L(),n})()};F(["click"]);export{ne as default};
