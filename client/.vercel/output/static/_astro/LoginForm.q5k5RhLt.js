import{j as s}from"./jsx-runtime.VXu5Enc-.js";import{r as c}from"./index.kdcK0Z_5.js";import{g as h,i as w,a as j,G as b,s as z,b as y}from"./client.eiXqt5f0.js";import{E as i,a as g,l as E}from"./Error.48P-_V8x.js";const l=h(j);l.setPersistence(w);const v=async e=>{const{email:n,password:a}=e;try{const t=await(await y(l,n,a)).user.getIdToken(),o=await fetch("/api/auth/login.json",{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!o.ok)return await o.json();o.redirected&&window.location.assign(o.url)}catch{return{error:"Invalid email/password"}}},N=async()=>{const e=new b,a=await(await z(l,e)).user.getIdToken(),r=await fetch("/api/auth/login.json",{method:"GET",headers:{Authorization:`Bearer ${a}`}});if(!r.ok)return await r.json();r.redirected&&window.location.assign(r.url)},k=()=>{c.useState(null);const[e,n]=c.useState(null),[a,r]=c.useState(!1),[t,o]=c.useState(null),u=async m=>{m.preventDefault(),o(null);const f=new FormData(m.currentTarget),d=E.safeParse(Object.fromEntries(f.entries()));if(!d.success){const x=d.error.flatten();o(x);return}r(!0);const p=await v(d.data);n(p),r(!1)};return s.jsxs("form",{className:"grid grid-cols-1 gap-3 w-full",onSubmit:u,children:[s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("label",{htmlFor:"email",className:"font-medium text-zinc-300 text-sm",children:"Email"}),s.jsx("input",{type:"text",id:"email",name:"email",className:"rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:ring-opacity-60 focus:bg-zinc-900"}),t?.fieldErrors?.email?s.jsx(i,{message:t.fieldErrors.email}):s.jsx(g,{})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("label",{htmlFor:"password",className:"font-medium text-zinc-300 text-sm",children:"Password"}),s.jsx("input",{type:"password",id:"password",name:"password",className:"rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:ring-opacity-60 focus:bg-zinc-900"}),t?.fieldErrors?.password?s.jsx(i,{message:t.fieldErrors.password}):s.jsx(g,{})]}),s.jsx("button",{className:"bg-zinc-100 py-1.5 border border-zinc-100 rounded-md mt-2 text-zinc-900 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#6488ea] disabled:opacity-50 disabled:cursor-not-allowed",type:"submit",disabled:a,children:a?"Signing in...":"Sign in"}),s.jsxs("div",{children:[s.jsx("hr",{className:"h-0 border-t mt-4 border-zinc-300"}),s.jsx("p",{className:"-mt-2.5 text-xs text-center text-zinc-500",children:s.jsx("span",{className:"bg-zinc-900 px-4",children:"Or with"})})]}),s.jsx("div",{className:"grid grid-cols-1",children:s.jsxs("button",{onClick:N,className:"bg-zinc-100 p-1.5 border border-zinc-100 flex justify-center items-center gap-2 rounded-md mt-2 text-zinc-900 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",type:"button",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-auto",preserveAspectRatio:"xMidYMid",viewBox:"0 0 256 262",children:[s.jsx("path",{fill:"#4285F4",d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"}),s.jsx("path",{fill:"#34A853",d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"}),s.jsx("path",{fill:"#FBBC05",d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"}),s.jsx("path",{fill:"#EB4335",d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),e&&s.jsxs(s.Fragment,{children:[e.error&&s.jsx(i,{message:e.error}),e.error?.code==="auth/wrong-password"&&s.jsx(i,{message:"Your password is incorrect"}),e.error?.code==="auth/user-not-found"&&s.jsx(i,{message:"You don't have an account with this email"})]})]})};export{k as default};
