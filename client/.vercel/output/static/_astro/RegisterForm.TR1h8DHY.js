import{j as s}from"./jsx-runtime.VXu5Enc-.js";import{r as n}from"./index.kdcK0Z_5.js";import{E as a,a as t,r as x}from"./Error.48P-_V8x.js";const b=async r=>{const e=await fetch("/api/auth/register.json",{method:"POST",body:r});if(!e.ok)return await e.json();e.redirected&&window.location.assign(e.url)},z=()=>{const[r,e]=n.useState(null),[i,c]=n.useState(!1),[o,d]=n.useState(null),f=async l=>{l.preventDefault(),d(null);const m=new FormData(l.currentTarget),u=x.safeParse(Object.fromEntries(m.entries()));if(!u.success){const p=u.error.flatten();d(p);return}c(!0);const g=await b(m);e(g),c(!1)};return s.jsxs("form",{className:"grid grid-cols-1 gap-3 w-full",onSubmit:f,children:[s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("label",{htmlFor:"email",className:"font-medium text-zinc-300 text-sm",children:"Email"}),s.jsx("input",{type:"text",id:"email",name:"email",className:"rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:bg-zinc-900 focus:ring-opacity-60"}),o?.fieldErrors?.email?s.jsx(a,{message:o.fieldErrors.email}):s.jsx(t,{})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("label",{htmlFor:"password",className:"font-medium text-zinc-300 text-sm",children:"Password"}),s.jsx("input",{type:"password",id:"password",name:"password",className:"rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:bg-zinc-900 focus:ring-opacity-60"}),o?.fieldErrors?.password?s.jsx(a,{message:o.fieldErrors.password}):s.jsx(t,{})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"font-medium text-zinc-300 text-sm",children:"Confirm password"}),s.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:"rounded-md py-1 px-3 bg-zinc-800 text-zinc-300 border border-zinc-700 focus:border-[#6488ea] focus:outline-none focus:ring-2 focus:ring-[#6488ea] focus:bg-zinc-900 focus:ring-opacity-60"}),o?.fieldErrors?.confirmPassword?s.jsx(a,{message:o.fieldErrors.confirmPassword}):s.jsx(t,{})]}),s.jsx("button",{className:"bg-zinc-100 py-1.5 border border-zinc-100 rounded-md mt-2 text-black font-medium text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#6488ea] focus:ring-offset-zinc-900",type:"submit",disabled:i,children:i?"Signing up...":"Sign up"}),r&&s.jsxs(s.Fragment,{children:[r.error&&s.jsx(a,{message:r.error}),r.error==="auth/email-already-exists"&&s.jsx(a,{message:"The email address is already in use by another account"})]})]})};export{z as default};
